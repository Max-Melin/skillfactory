markdown
# Сценарии использования

## Сценарий 1: Успешное оформление заказа с оплатой онлайн

**Цель:** Получить пиццу с доставкой на дом, оплатив заказ картой.  
**Акторы:** Клиент (зарегистрированный), Система, Платежный шлюз.

### Основной поток:

1. Клиент добавляет две пиццы в корзину, одной из них добавляет дополнительный сыр.
2. Клиент переходит в корзину, проверяет состав и сумму, нажимает "Оформить заказ".
3. Система предлагает авторизоваться или продолжить без регистрации. Клиент вводит email и пароль.
4. Система показывает форму оформления. Клиент выбирает из списка сохраненных адресов "Дом".
5. Клиент выбирает способ оплаты "Онлайн картой".
6. Система перенаправляет на страницу ввода данных карты.
7. Клиент вводит данные карты и подтверждает оплату.
8. Система показывает экран "Заказ принят! Ожидайте доставку по адресу [адрес]", меняет статус заказа и отправляет уведомление на кухню и в службу доставки и отправляет email с деталями заказа.

### Альтернативный сценарий:

#### А.1 (Выбор оплаты наличными):

1. На шаге 5 клиент выбирает "Наличными".
2. Система сразу переходит к шагу 8, но с пометкой "Ожидает оплаты".

#### А.2 (Выбор оплаты СБП):

1. На шаге 5 клиент выбирает "Оплата СБП".
2. Система отображает клиенту QR код для оплаты по СБП.
3. Клиент сканирует QR с личного кабинета банка.
4. Система переходит к шагу 8.

### Исключения:

- **И.1 (Ошибка оплаты):** На шаге 8 система показывает сообщение "Оплата не прошла, попробуйте другую карту" и возвращает клиента на шаг 6.
- **И.2 (Нет товара в наличии):** После шага 2 система проверяет наличие. Если один из товаров закончился, показывает сообщение "Извините, пицца [Название] закончилась" и предлагает убрать ее из корзины.